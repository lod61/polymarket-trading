# 短期预测策略指南 - 专业投机策略

## 策略概述

这是一个专门为Polymarket 15分钟Up/Down市场设计的**多因子综合策略**，不依赖单一指标，而是结合多个信号源，最大化盈利能力。

## 核心思路

### 1. 短期动量（权重40%）⭐最重要

**原理**：
- 检查最近3和5个15分钟周期的价格变化
- 如果最近45-75分钟持续上涨 → 买入YES
- 如果最近45-75分钟持续下跌 → 买入NO

**为什么有效**：
- 15分钟市场需要捕捉短期趋势
- 3-5个周期的动量比长期EMA更及时
- 短期趋势延续性较强

**实现**：
```typescript
momentumPeriods: [3, 5]  // 检查3和5个周期
momentumThreshold: 0.001  // 至少0.1%的变化
```

### 2. 波动性分析（权重15%）

**原理**：
- 计算ATR（Average True Range）
- 高波动性时，如果动量明确，信号更强
- 低波动性时，信号减弱

**为什么有效**：
- 高波动性 = 市场有方向性
- 低波动性 = 可能是震荡，方向不明确

### 3. 市场定价偏差（权重25%）⭐套利机会

**原理**：
- 基于Chainlink价格趋势估算实际概率
- 比较Polymarket价格 vs 实际概率
- 如果Polymarket低估了YES概率 → 买入YES（套利）

**为什么有效**：
- 这是真正的套利机会
- Polymarket价格可能滞后于实际价格变化
- 偏差越大，机会越好

**示例**：
- Chainlink价格最近上涨0.2%
- 实际YES概率应该约52%
- 但Polymarket YES价格只有48%
- → 买入YES（4%的定价偏差）

### 4. 成交量异常（权重10%）

**原理**：
- 异常高的成交量可能预示方向
- 结合动量信号使用

**为什么有效**：
- 大资金可能知道方向
- 异常成交量 + 明确动量 = 强信号

### 5. 时间因素（权重10%）

**原理**：
- 市场开始前5分钟的趋势很重要
- 如果市场刚开始就上涨 → 可能继续上涨

**为什么有效**：
- 早期趋势往往延续
- 但权重较低，避免过度依赖

## 策略配置

### 推荐配置（平衡型）

```typescript
const config = {
  momentumPeriods: [3, 5],
  momentumThreshold: 0.001,      // 0.1%
  volatilityPeriod: 10,
  highVolatilityMultiplier: 1.5,
  pricingDeviationThreshold: 0.05,  // 5%
  volumeAnomalyThreshold: 2.0,
  useTimeFactor: true,
  earlyMarketWeight: 0.3,
  minConfidence: 0.60,           // 最小60%信心度
  minSignalStrength: 0.55,       // 最小55%信号强度
};
```

### 激进配置（更多交易）

```typescript
const config = {
  minConfidence: 0.55,           // 降低到55%
  minSignalStrength: 0.50,       // 降低到50%
  momentumThreshold: 0.0005,     // 降低到0.05%
  // ... 其他参数相同
};
```

### 保守配置（高质量信号）

```typescript
const config = {
  minConfidence: 0.65,           // 提高到65%
  minSignalStrength: 0.60,       // 提高到60%
  momentumThreshold: 0.002,     // 提高到0.2%
  pricingDeviationThreshold: 0.08,  // 提高到8%
  // ... 其他参数相同
};
```

## 信号生成逻辑

### 买入YES的条件

1. **动量 > 0.1%**（最近3-5周期上涨）
2. **定价偏差 < -5%**（YES被低估）OR **动量很强**
3. **综合评分 > 0.55**
4. **信心度 > 60%**

### 买入NO的条件

1. **动量 < -0.1%**（最近3-5周期下跌）
2. **定价偏差 > 5%**（YES被高估）OR **动量很强**
3. **综合评分 < -0.55**
4. **信心度 > 60%**

## 仓位管理

### 基础仓位
- **最小**: $50
- **基础**: $100
- **最大**: $500

### 仓位调整因子

1. **信心度**：信心度越高，仓位越大
2. **信号强度**：信号越强，仓位越大
3. **概率调整**：如果概率>70%，降低仓位（可能已充分定价）
4. **流动性限制**：不超过流动性的5%

### 公式
```
仓位 = 基础仓位 × 信心度 × 信号强度 × 概率调整因子
最终仓位 = min(max(仓位, 50), min(500, 流动性×5%))
```

## 风险控制

### 1. 最小阈值
- 必须同时满足：信心度 ≥ 60% AND 信号强度 ≥ 55%
- 避免低质量信号

### 2. 因子一致性
- 多个因子一致时，信心度更高
- 如果因子冲突，降低信心度

### 3. 流动性要求
- 只交易流动性 > $1,000的市场
- 避免滑点风险

### 4. 止损（建议）
- 如果市场开始后5分钟，价格反向移动 > 1%，考虑止损
- 或等待市场解决（15分钟很短）

## 优势分析

### vs EMA策略

| 特性 | EMA 12/26 | 短期动量策略 |
|------|-----------|-------------|
| 响应速度 | 慢（3-6小时） | 快（45-75分钟） |
| 适合15分钟 | ❌ 不匹配 | ✅ 匹配 |
| 假信号 | 多 | 少（多因子确认） |
| 套利机会 | ❌ 无 | ✅ 有（定价偏差） |

### vs 单一指标策略

| 特性 | 单一指标 | 多因子策略 |
|------|---------|-----------|
| 信号质量 | 中等 | 高 |
| 假信号 | 多 | 少 |
| 盈利能力 | 中等 | 高 |
| 稳定性 | 低 | 高 |

## 实际应用

### 使用示例

```typescript
import { ShortTermStrategy } from './short-term-strategy.js';

const strategy = new ShortTermStrategy(chainlinkClient, klineClient);

const signal = await strategy.analyzeMarket('btc', marketId, prices);

if (signal) {
  console.log(`方向: ${signal.outcome}`);
  console.log(`信心度: ${signal.confidence}`);
  console.log(`建议仓位: $${signal.recommendedSize}`);
  console.log(`原因: ${signal.reason}`);
  
  // 执行交易
  await placeOrder({
    marketId,
    outcome: signal.outcome,
    size: signal.recommendedSize,
  });
}
```

### 测试策略

```bash
bun run src/test-short-term-strategy.ts btc
```

## 优化建议

### 1. 回测优化
- 使用历史数据回测不同参数组合
- 找到最优的阈值和权重

### 2. 动态调整
- 根据市场环境动态调整参数
- 高波动性时提高阈值
- 低波动性时降低阈值

### 3. 机器学习（未来）
- 使用历史数据训练模型
- 自动优化权重和阈值

## 总结

### 为什么这个策略更好？

1. ✅ **时间匹配**：3-5周期动量适合15分钟预测
2. ✅ **多因子确认**：减少假信号
3. ✅ **套利机会**：捕捉定价偏差
4. ✅ **专业思路**：结合动量、波动性、定价、成交量
5. ✅ **风险可控**：多重阈值和仓位管理

### 关键成功因素

1. **短期动量**是最重要的因子（40%权重）
2. **定价偏差**提供套利机会（25%权重）
3. **多因子一致性**提高信心度
4. **严格阈值**避免低质量信号

### 预期表现

- **胜率目标**: 55-60%（基于历史数据）
- **平均收益**: 每笔交易 $10-30
- **风险**: 中等（15分钟市场，风险可控）

---

**专业建议**：先用小资金测试，验证策略有效性后再加大仓位。策略需要根据实际表现持续优化。

